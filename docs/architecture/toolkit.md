# Toolkit

**Toolkit** · `pkg/`

Переиспользуемый инструментарий. Не знает о конкретном проекте — можно перенести в любой другой Go-проект без изменений.

---

## Концепт

Toolkit — слой в котором живут все технологии которыми пользуется проект. Обёртки над базами данных, логгер, очереди, HTTP-сервер, парсер конфигов — всё что не знает о конкретной бизнес-логике живёт здесь.

Toolkit не знает о Realm. Пакеты не импортируют `internal/`, не знают о конкретных сущностях проекта, описывают собственные типы. Это делает инструментарий переносимым: взял, перенёс в другой проект — работает.

Toolkit определяет какие технологии использует система, но не как они применяются в бизнесе. Postgres умеет сохранять и находить — это его язык. Что именно сохранять и зачем — это язык Realm.

### Сущности

**Services** — singleton-обёртки над внешними системами: базы данных, очереди, внешние API. Инициализируются один раз, доступны через геттеры из любого слоя.

**Infra** — инфраструктурные примитивы которые обслуживают сам проект: логирование, трейсинг, eventbus, env vars. Инициализируются первыми — раньше services и apps.

**Libs** — переиспользуемые строительные блоки без состояния. Не singletons, не требуют Init. Импортируешь и используешь.

---

## Структура

```
pkg/
├── services/
│   ├── main.go              — переменные, геттеры, Configs, Init, Stop
│   └── repository/
│       ├── configs.go       — Configs
│       ├── interface.go     — Service interface + внутренние типы результатов
│       └── service.go       — реализация + NewService(configs Configs) Service
├── infra/
│   ├── main.go              — Configs + Init + Stop (если нужно)
│   ├── logs/                — глобальный логгер
│   ├── tracer/              — distributed tracing
│   ├── eventbus/            — внутренний publish/subscribe
│   └── vars/                — env-переменные и feature flags
└── libs/
    └── go-kit/
        ├── configs/         — загрузка JSON/YAML с подстановкой env
        ├── http/
        │   ├── server/      — Fiber HTTP-сервер из коробки
        │   ├── endpoints/   — интерфейс самоописывающегося endpoint
        │   ├── params/      — generic парсинг параметров запроса
        │   └── responses/   — стандартная структура ошибок
        └── logs/            — базовая обёртка над logrus
```

→ [Подробнее о Services](/architecture/services) · [Подробнее об Infra](/architecture/infra) · [Подробнее о Libs](/architecture/libs)
